#include <string>
#include <vector>

using namespace std;

string solution(string new_id) {
    string answer = "";
    int len = new_id.length();
        for (int i = 0; i < len ; i++)
        {
            if (isalpha(new_id[i]))
                answer+=(tolower(new_id[i]));
            else if (isdigit(new_id[i]) || new_id[i] == '-' || new_id[i] == '_' || new_id[i] == '.' )
                answer+=(tolower(new_id[i]));
            else
                continue;
            if (new_id[i] == '.')
            {
                int j = i;
                while ( j + 1 < len && (!isalpha(new_id[j + 1]) && !isdigit(new_id[j + 1]) && new_id[j + 1] != '-' && new_id[j + 1] != '_'))
                    j++;
                i = max(i,j);
            }

        }
        if (answer[0] == '.')
            answer = answer.substr(1,answer.length());
        if (answer[answer.length()-1] == '.')
            answer = answer.substr(0,answer.length() - 1);
        if (answer.length() == 0)
            answer+=('a');
        int pre_length = answer.length();
        if (pre_length >= 16)
            answer = answer.substr(0,15);
        if (answer[answer.length() - 1]== '.')
            answer = answer.substr(0,14);
        if (answer.length() < 3)
        {
            char tmp = answer[answer.length()-1];
            for (int i = 0; answer.length() < 3;)
                answer += tmp;
        }
    return answer;
}
